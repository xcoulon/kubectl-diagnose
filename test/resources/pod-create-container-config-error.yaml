apiVersion: v1
kind: Pod
metadata:
  name: create-container-config-error
spec:
  containers:
  - name: default
    image: caddy:2
    ports:
    - containerPort: 80
      name: http
      protocol: TCP
    resources:
      limits:
        cpu: 500m
        memory: 100Mi
      requests:
        cpu: 100m
        memory: 20Mi
    volumeMounts:
    - name: caddy-config
      mountPath: "/etc/caddy"
    - name: caddy-config-cache
      mountPath: "/config/caddy"
    env:
    - name: COOKIE
      valueFrom:
        configMapKeyRef:
          name: unknown-configmap # unknown
          key: cookie
  securityContext:
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault
  serviceAccount: default
  serviceAccountName: default
  volumes:
  - name: caddy-config
    configMap:
      name: caddy-config
  - name: caddy-config-cache
    emptyDir: {}
status:
  conditions:
  - message: 'containers with unready status: [default]'
    reason: ContainersNotReady
    status: "False"
    type: Ready
  - message: 'containers with unready status: [default]'
    reason: ContainersNotReady
    status: "False"
    type: ContainersReady
  containerStatuses:
  - image: caddy:2
    imageID: ""
    name: default
    ready: false
    restartCount: 0
    started: false
    state:
      waiting:
        message: configmap "unknown-configmap" not found
        reason: CreateContainerConfigError
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: caddy-config
data:
  Caddyfile: |-
    http://:8080

    respond "Hello, world!"